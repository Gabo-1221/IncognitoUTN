
                    <!-- Toggle Between Modals -->

                          <!-- Modal 1-->
                          <div
                          class="modal fade"
                          id="modalToggle"
                          aria-labelledby="modalToggleLabel"
                          tabindex="-1"
                          style="display: none"
                          aria-hidden="true"
                        >
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="modalToggleLabel">Crear encuesta (1/2)</h5>
                                <button
                                  type="button"
                                  class="btn-close"
                                  data-bs-dismiss="modal"
                                  aria-label="Close"
                                ></button>
                              </div>
                                <div class="modal-body">                              
                                    <form action="/forms/nuevaEncuesta" method="post">
                                    <div id="alert"  role="alert"></div>
                                    <div class="mb-3">
                                      <label class="form-label" for="nombre">Nombre de la Encuesta</label>
                                      <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Ingresa un nombre para la encuesta" />
                                    </div>
                                    <div class="mb-3">
                                      <label for="areaSelect" class="form-label">Categoria</label>
                                      <select class="form-select" id="areaSelect" name="area">
                                        <option >Selecionar una Area...</option>
                                        <% areas.forEach(area => { %>
                                          <option value="<%= area._id %>"><%= area.nombre %></option>
                                      <% }) %>
                                      </select>
                                    </div>
                                    <div class="mb-3">
                                      <label class="form-label" for="user">Creado por..</label>
                                      <div class="input-group input-group-merge">
                                        <input
                                          type="text"
                                          id="user"
                                          name="user"
                                          class="form-control"
                                          placeholder="usuario"
                                          value="user1"
                                          readonly
                                        />
                                      </div>
                                    </div>
                                    <div class="mb-3">
                                      <label class="form-label" for="canperson">Cantidad de personas que podran responder</label>
                                      <input
                                        type="number"
                                        id="canperson"
                                        name="canperson"
                                        class="form-control phone-mask"
                                        placeholder="Ingresa cantidad de personas para contestar "

                                      />
                                    </div>
                                    <div class="mb-3">
                                      <label class="form-label" for="fechat">Fecha de termino</label>
                                      <input class="form-control" type="date" name="fechat" id="fechat">
                                    </div>
                                    
                                    <div class="modal-footer">
                                      <button
                                      type="submit"
                                      class="btn btn-primary"
                                      data-bs-target="#modalToggle2"
                                      data-bs-toggle="modal"
                                      data-bs-dismiss="modal"
                                      >
                                      Siguiente
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                      Cancelar
                                    </button>
                                  </div>
                                </form>
                                </div>

                              </div>
                            </div>
                          </div>
                          <script>
                            document.addEventListener('DOMContentLoaded', function() {
                            // Selecciona el formulario de nueva encuesta
                            const encuestaForm = document.querySelector('form[action="/forms/nuevaEncuesta"]');
                            const encuestaSubmitButton = encuestaForm.querySelector('button[type="submit"]');

                            // Crea un contenedor para los mensajes de error (opcional)
                            const errorContainer = document.createElement('div');
                            errorContainer.id = 'alert';
                            encuestaForm.insertBefore(errorContainer, encuestaForm.firstChild); // Agrega el contenedor al inicio del formulario

                            // Deshabilita el botón de enviar inicialmente
                            encuestaSubmitButton.disabled = true;

                            // Escucha los eventos 'input' en los campos requeridos
                            const requiredFieldsEncuesta = ['nombre', 'areaSelect', 'canperson', 'fechat'];
                            requiredFieldsEncuesta.forEach(fieldId => {
                              const field = document.getElementById(fieldId);
                              field.addEventListener('input', validateEncuestaForm);
                            });

                            encuestaForm.addEventListener('submit', function(event) {
                              if (!validateEncuestaForm()) {
                                event.preventDefault();
                              }
                            });

                            function validateEncuestaForm() {
                              let isValid = true;
                              errorContainer.innerHTML = ''; 

                              // Validar el campo "nombre"
                              const nombreInput = document.getElementById('nombre');
                              if (nombreInput.value.trim() === '') {
                                isValid = false;
                                showError('Por favor, ingresa un nombre para la encuesta.');
                              }

                              // Validar el campo "areaSelect"
                              const areaSelect = document.getElementById('areaSelect');
                              if (areaSelect.value === 'Selecionar una Area...') { // Verifica si se ha seleccionado una área diferente de la opción por defecto
                                isValid = false;
                                showError('Por favor, selecciona un área.');
                              }

                              // Validar el campo "canperson"
                              const canpersonInput = document.getElementById('canperson');
                              if (canpersonInput.value.trim() === '') {
                                isValid = false;
                                showError('Por favor, ingresa la cantidad de personas que podrán responder.');
                              }

                              // Validar el campo "fechat"
                              const fechatInput = document.getElementById('fechat');
                              if (fechatInput.value.trim() === '') {
                                isValid = false;
                                showError('Por favor, ingresa la fecha de término.');
                              }

                              // Habilita o deshabilita el botón de enviar según la validez del formulario
                              encuestaSubmitButton.disabled = !isValid;

                              if (isValid) {
                                errorContainer.style.display = 'none'; // Oculta la alerta
                              } else {
                                errorContainer.classList.add('alert', 'alert-danger','alert-dismissible'); 
                                errorContainer.style.display = 'block'; // Muestra la alerta
                              }

                              return isValid;
                            }

                            function showError(message) {
                              const errorElement = document.createElement('span');
                              errorElement.classList.add('error-messages');
                              errorElement.textContent = message;
                              errorContainer.appendChild(errorElement);
                            }
                          });
                          </script>
                          <%- include('../forms/formEncuestaP2.ejs') %>


